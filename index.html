<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>길마루 - 한글 주소 시스템</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="대한민국 어디든 4단어로 표현하는 새로운 주소 시스템">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css">

  <!-- Kakao Maps SDK -->
  <!-- libraries=services for Places Search -->
  <script type="text/javascript"
    src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=c2db0ea3cf94c9b50e56b5883f54537a&libraries=services"></script>
</head>

<body>

  <!-- Map Area -->
  <div id="map-container">
    <div id="map"></div>
    <canvas id="grid-canvas"></canvas>

    <!-- Central Maker (Static Pin) -->
    <div id="center-marker">
      <svg viewBox="0 0 24 24">
        <path
          d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
      </svg>
    </div>
  </div>

  <!-- Top Search Bar -->
  <div class="search-container">
    <div class="search-box">
      <input type="text" id="search-input" class="search-input" placeholder="장소 또는 길마루 주소 검색 (예: 강남역)">
      <button class="search-btn" onclick="handleSearch()">
        <span class="material-icons">search</span>
      </button>
      <div style="width:1px; height:20px; background:#ddd; margin:0 8px;"></div>
      <button class="search-btn" id="btn-intro" title="길마루 소개" style="color:var(--primary-color);">
        <span class="material-icons">help_outline</span>
      </button>
    </div>
  </div>

  <!-- Right Floating Buttons -->
  <div class="fab-container">
    <button class="fab" id="btn-my-location" title="내 위치">
      <span class="material-icons">my_location</span>
    </button>
    <!-- Map/Info Toggle could go here or in a separate menu. Keeping it simple for now as requested features are priority. -->
  </div>

  <!-- Zoom Indicator -->
  <!-- Zoom Indicator -->
  <div id="zoom-indicator">
    <span class="material-icons" style="font-size:16px; color:var(--primary-color);">zoom_in</span>
    <span id="zoom-level">Zoom: -</span>
  </div>

  <!-- App Version -->
  <!-- App Version -->
  <div id="app-version">Gilmaru v1.7.6</div>

  <!-- Bottom Sheet (Address Display) -->
  <div class="bottom-sheet">
    <div class="address-card">
      <div class="place-name" id="place-name"></div>
      <div class="address-label">현재 위치의 길마루 주소</div>
      <div class="gilmaru-address" id="address-text" title="클릭하여 복사">
        로딩중...
      </div>
      <div class="sentence-address" id="sentence-text"></div>
      <div class="road-address" id="road-address"></div>

      <div class="action-buttons">
        <button class="btn btn-primary" id="btn-share">
          <span class="material-icons">share</span> 공유하기
        </button>
        <button class="btn btn-secondary" id="btn-copy">
          <span class="material-icons">content_copy</span> 복사
        </button>
        <button class="btn btn-secondary" id="btn-qr" aria-label="QR 코드 보기">
          <span class="material-icons">qr_code_2</span> QR
        </button>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast">메시지</div>

  <!-- Intro Modal -->
  <div id="intro-modal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h3>길마루란?</h3>
        <button id="btn-close-intro" class="close-btn"><span class="material-icons">close</span></button>
      </div>
      <div class="modal-content">
        <p class="intro-main-text">
          <b>"반달 자리 응원 햇볕"</b><br>
          대한민국 <span class="highlight">모든 곳</span>을<br>
          <span class="highlight">4개의 단어</span>로 기억하세요.
        </p>

        <div class="comparison-box">
          <div class="comp-item">
            <div class="comp-label">What3Words (w3w)</div>
            <div class="comp-desc">"사과.바나나.책상"</div>
            <div class="comp-note">순서가 바뀌면 다른 위치</div>
          </div>
          <div class="comp-vs">VS</div>
          <div class="comp-item highlight-item">
            <div class="comp-label">길마루 (Gilmaru)</div>
            <div class="comp-desc">"반달이 자리에서<br>응원과 햇볕"</div>
            <div class="comp-note">순서를 섞어도 <b>같은 위치</b></div>
          </div>
        </div>

        <ul class="intro-features">
          <li>✨ <b>감성 주소</b>: 외우기 쉬운 한글 문장</li>
          <li>📚 <b>쉬운 단어</b>: TOPIK 1~3급 기초 어휘 사용</li>
          <li>🌪️ <b>순서 무관</b>: 단어 순서를 섞어도 찰떡같이 인식</li>
          <li>🎯 <b>10m 정밀도</b>: 만남의 장소, 입구 찾기에 최적</li>
          <li>💸 <b>완전 무료</b>: 누구나 사용할 수 있는 오픈 플랫폼</li>
        </ul>

        <details class="tech-specs">
          <summary>기술 명세 (Technical Details)</summary>
          <div class="specs-content">
            <p>· <b>시스템 구조</b>: WGS84 위도/경도 기반 2단계 이중 격자 (Dual-Grid System)</p>
            <p>· <b>서비스 범위</b>: 대한민국 전역 및 모든 도서 지역</p>
            <p>· <b>격자 구역</b>: 1차(약 5km) / 2차(약 10m)</p>
            <p>· <b>좌표 정밀도</b>: 0.0001도 (약 10m×10m 해상도)</p>
            <p class="sub-text">* 법정 주소가 없는 산간, 해상, 공터 등 모든 핀포인트 위치를 특정합니다.</p>
          </div>
        </details>

        <div class="modal-footer">
          <p class="modal-footer-text">Gilmaru v1.7.6</p>
          <p class="modal-footer-text" style="margin-top:4px;">Contact: <a href="mailto:jype@kakao.com"
              style="color:#9ca3af; text-decoration:none;">jype@kakao.com</a></p>
        </div>
      </div>
    </div>
  </div>

  <!-- QR Code Modal -->
  <div id="qr-modal" class="modal-overlay">
    <div class="modal-container" style="max-width: 360px; background: transparent; box-shadow: none; padding: 0;">

      <!-- The Card to Capture -->
      <div id="qr-card-container" class="qr-card">
        <div class="logo">길마루</div>
        <div class="qr-box" id="qr-code-display"></div>
        <h2 class="gilmaru-address" id="qr-gilmaru-text"></h2>
        <p class="road-address" id="qr-road-address-text"></p>
        <div class="footer-note">외우기 쉬운 한글 주소</div>
      </div>

      <!-- Actions -->
      <div class="qr-actions"
        style="margin-top: 20px; text-align: center; gap: 10px; display: flex; justify-content: center;">
        <button id="btn-save-image" class="btn btn-primary"
          style="background:#3b82f6; border:none; color:white; height: auto; padding: 8px 16px;">
          <span class="material-icons" style="font-size:18px; margin-right:4px;">download</span> <span
            style="line-height: 1.2;">이미지<br>저장</span>
        </button>
        <button id="btn-close-qr" class="btn btn-secondary" style="background:white; color:#333;">
          닫기
        </button>
      </div>

    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="word_data.js?v=1.7.6"></script>
  <script src="app.js?v=1.7.6"></script>
</body>

</html>